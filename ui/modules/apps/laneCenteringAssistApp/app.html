<div class="bngApp lca-container" layout="column">
  <style>
    .lca-container { padding: 6px; color: #f0f0f0; font-family: 'Roboto', sans-serif; }
    .lca-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
    .lca-status { padding: 4px 8px; border-radius: 4px; font-weight: 600; min-width: 110px; text-align: center; }
    .lca-status-ready { background: rgba(60, 120, 255, 0.25); border-left: 4px solid #4ca3ff; }
    .lca-status-active { background: rgba(40, 180, 80, 0.35); border-left: 4px solid #39d66c; }
    .lca-status-idle { background: rgba(180, 180, 180, 0.2); border-left: 4px solid #d0d0d0; }
    .lca-status-warning { background: rgba(230, 150, 40, 0.35); border-left: 4px solid #ffb347; }
    .lca-status-missing { background: rgba(200, 60, 60, 0.35); border-left: 4px solid #ff6b6b; }
    .lca-header-metrics { display: flex; gap: 12px; font-size: 11px; opacity: 0.85; }
    .lca-status-detail { font-size: 11px; margin-top: 2px; opacity: 0.8; }
    .lca-info { margin-top: 6px; display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 4px 12px; font-size: 11px; opacity: 0.9; }
    .lca-warning { grid-column: span 2; color: #ffb347; font-weight: bold; }
    canvas { width: 100%; height: 100%; border-radius: 4px; background: rgba(0, 0, 0, 0.25); }
  </style>
  <div class="lca-header">
    <div>
      <div class="lca-status" ng-class="vm.statusClass">{{vm.statusText}}</div>
      <div class="lca-status-detail" ng-if="vm.statusDetail">{{vm.statusDetail}}</div>
    </div>
    <div class="lca-header-metrics">
      <div>Assist: {{vm.assistForce}}</div>
      <div>Weight: {{vm.assistWeight}}</div>
      <div>Driver: {{vm.driverInput}}</div>
      <div>Final: {{vm.finalSteer}}</div>
    </div>
  </div>
  <canvas width="300" height="260"></canvas>
  <div class="lca-info">
    <div>Speed: {{vm.speed}} m/s</div>
    <div>Lookahead: {{vm.lookahead}} m</div>
    <div>Lane width: {{vm.laneWidth}} m</div>
    <div>Heading error: {{vm.headingError}} Â°</div>
    <div>Offset current: {{vm.offsetCurrent}} m</div>
    <div>Target offset: {{vm.offsetTarget}} m</div>
    <div>Offset error: {{vm.offsetError}} m</div>
    <div>Offset norm: {{vm.offsetNormalized}}</div>
    <div>Curvature: {{vm.curvature}}</div>
    <div>Warning: {{vm.warning ? 'YES' : 'No'}}</div>
    <div class="lca-warning" ng-if="vm.warning">Lane boundary proximity</div>
  </div>
</div>
